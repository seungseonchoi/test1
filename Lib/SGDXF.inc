{$INCLUDE sgver.inc}

{$DEFINE SGVER_5_2_5}
// Support sgDrawingNavigator unit
{$DEFINE SGVER_6_0_0} // to comment this define for old versions CAD/DXF Import VCL

{$IFDEF SGVER_6_0_0}
  // Unsupport sgImage unit, Support only sgDrawingNavigator unit
  {$UNDEF SGVER_5_2_5}
{$ENDIF}

{$IFNDEF CPUARM}
  {$IFDEF ASSEMBLER}
    {$DEFINE SG_ASSEMBLER}
    {$IFDEF SG_CPUX64}
      {$DEFINE SG_ASSEMBLER64}
    {$ELSE}
      {$DEFINE SG_ASSEMBLER32}
    {$ENDIF}
  {$ENDIF}
{$ENDIF}

// support optimized code for some global functions
{$DEFINE SG_FAST_CODE}

{$A+}// Record field alignment =8
{$J+}// Assignable typed const

{$TYPEDADDRESS OFF} // to do Errors of compilation of the library code with the option "Typed @ operator"

{$IFDEF SGDEL_XE2}
{.$UNDEF SG_FAST_CODE}
{.$DEFINE SG_FUTURE_CONVERSION_XE2}
{$DEFINE SG_WINAPI_GDIPLUS}
{$ENDIF}

{$IFDEF SGDEL_XE}
{$DEFINE SG_HAS_FORMATSETTINGS_FEATURE}
{$ENDIF}

{$DEFINE SG_BCB}
{$IFNDEF VER93}         // C++ Builder 1.0
  {$IFNDEF VER110}      // C++ Builder 3.0
    {$IFNDEF VER125}    // C++ Builder 4.0
      {$IFNDEF BCB}     // C++ Builder 5.0 or higher
        {$UNDEF SG_BCB}
      {$ENDIF}
    {$ENDIF}
  {$ENDIF}
{$ENDIF}

{$IFDEF SGDEL_4}
  {$IFNDEF SG_BCB}
    {$DEFINE SG_USEGDIPLUS}
  {$ELSE}
    {$IFDEF SGDEL_2007}
      {$DEFINE SG_USEGDIPLUS}
    {$ENDIF}
  {$ENDIF}
{$ENDIF}

{$IFDEF SGDEL_2010}
  {$WEAKLINKRTTI ON}
  //{$RTTI EXPLICIT METHODS([]) PROPERTIES([]) FIELDS([])}
{$ENDIF}

{$DEFINE SG_DELPHI_VCL}

{$IFDEF SGFPC}
{$IFDEF FPC_HAS_UNICODESTRING}
{$DEFINE UNICODESTRING_TYPE_DEFINED}
{$DEFINE HAS_OBJECT_GETHASHCODE}
{$DEFINE HAS_OBJECT_CAST_FROM_INTERFACE}
{$ENDIF}
{$IFDEF FPC_HAS_CPSTRING}
{$DEFINE SG_HAS_CPSTRING}
{$ENDIF}
{$DEFINE SG_HAS_FORMATSETTINGS_FEATURE}
{$DEFINE SG_HAS_WINAPI_INTERFACE}
{.$DEFINE SG_HAS_FEATURE_TYPE_ARRAY}
{$UNDEF SG_DELPHI_VCL}
{$DEFINE LIST_PTR}
{$IFDEF Windows}
  {$DEFINE SG_WINDOWS}
  {$DEFINE SG_WIN_FPC}
{$ENDIF}
{$IFDEF Unix}
  {$DEFINE SG_UNIX_FPC}
{$ENDIF}
{$IFDEF Linux}
  {$DEFINE SG_LINUX}
  {$DEFINE SG_NON_WIN_PLATFORM}
  {$UNDEF SG_WINDOWS}
  {$UNDEF SG_FAST_CODE}
  {$DEFINE SG_LINUX_FPC}
{$ENDIF}
{$IFDEF VER2}
 {$IFDEF UNICODE}
  //
 {$ENDIF}
 {$UNDEF SGFULLGDIPLUS}
 {$UNDEF SG_USEGDIPLUS}
{$ENDIF}
{$IFNDEF VER2_4}
  {$DEFINE HAS_FEATURE_ENCODING}
{$ENDIF}
{$IFDEF VER3}
 {$IFDEF UNICODE}
  //
 {$ENDIF}
 {$UNDEF SGFULLGDIPLUS}
 {$UNDEF SG_USEGDIPLUS}
 {$DEFINE HAS_FEATURE_ENCODING}
{$ENDIF}
{$DEFINE HAS_UNMANAGED_TYPEINFO}
{$ASMMODE intel}

{$IFNDEF SG_CAD_DLL}
{$MODE Delphi}
{$ENDIF}

{$OBJECTCHECKS OFF}
{$ENDIF}

{$IFNDEF SGDEL_2009}
  {$DEFINE LIST_PTR}
{$ELSE}
  {$DEFINE HAS_FEATURE_ANSISTRINGS}
  {$DEFINE HAS_FEATURE_ENCODING}
  {$DEFINE UNICODESTRING_TYPE_DEFINED}
  {$DEFINE HAS_OBJECT_GETHASHCODE}
  {$DEFINE SG_HAS_CPSTRING}
{$ENDIF}

{$IFDEF SGDEL_2010}
{$DEFINE SG_HAS_FEATURE_TYPE_ARRAY}
{$DEFINE HAS_OBJECT_CAST_FROM_INTERFACE}
{$ENDIF}

{$IFDEF SG_FIREMONKEY}
  {$UNDEF SG_DELPHI_VCL}
  {$ZEROBASEDSTRINGS OFF}
  {$UNDEF SG_USEGDIPLUS}
  {$DEFINE SG_NON_WIN_PLATFORM}//no use win api
  {$IFDEF ANDROID}
    {$DEFINE SG_FM_ANDROID}
    {$DEFINE SG_FM_MOBILE}
  {$ELSE}
     {$IFDEF IOS}
       {$DEFINE SG_FM_IOS}
       {$DEFINE SG_FM_MOBILE}
       {$UNDEF SG_ASSEMBLER}
       {$UNDEF SG_ASSEMBLER32}
       {$UNDEF SG_ASSEMBLER64}
     {$ELSE}
        {$IFDEF MACOS}
           {$DEFINE SG_FM_MACOS}
           {$DEFINE SG_FM_DESKTOP}
           {$DEFINE SG_FM_UNIX}
        {$ELSE}
           {$IFDEF MSWINDOWS}
             {$UNDEF SG_WINDOWS}
             {$DEFINE SG_FM_WINDOWS}
             {$DEFINE SG_WINAPI}
             {$DEFINE SG_FM_DESKTOP}
             {$DEFINE SG_HAS_ACTIVEX}
           {$ELSE}
              {$IFDEF LINUX}
                {$DEFINE SG_LINUX}
                {$DEFINE SG_FM_LINUX}
                {$DEFINE SG_FM_DESKTOP}
                {$DEFINE SG_FM_UNIX}
              {$ENDIF}
           {$ENDIF}
        {$ENDIF}
     {$ENDIF}
  {$ENDIF}
  {$IFDEF SG_FM_MOBILE}
    {$IFNDEF SGDEL_10_SYDNEY}
      {$UNDEF HAS_FEATURE_ANSISTRINGS}
    {$ENDIF}
  {$ENDIF}
  {$IFNDEF SG_FM_WINDOWS}
    {$UNDEF SG_FAST_CODE}
  {$ENDIF}

{$ELSE}
  {$IFDEF MSWINDOWS}
    {$DEFINE SG_WINDOWS}
    {$DEFINE SG_WINAPI}
    {$DEFINE SG_HAS_ACTIVEX}
    {$IFDEF SGFPC}
      {$UNDEF SG_FAST_CODE}
    {$ENDIF}
  {$ENDIF}
{$ENDIF}

{$IFDEF SG_WINAPI}
{$DEFINE SG_HAS_WINAPI_INTERFACE}
{$ENDIF}

{$IFDEF SGDEL_2010}
{$DEFINE HAS_UNMANAGED_TYPEINFO}
{$ENDIF}

{$IFDEF SGDEL_6}
{$A8} // Record field alignment = 8
{$WARN SYMBOL_PLATFORM OFF}
{$ENDIF}

{$R-}//Range checking disenables
{$Q-}
{$IFNDEF SGFPC}
{$IFDEF SGDEL_6}
{$SetPeFlags $0020}//App can handle >2gb addresses
{$ENDIF}
{$ENDIF}

{$DEFINE SG_SHARED_VCL}

{$IFDEF SG_ABVIEWER}
  {$IFDEF SG_USE_NEW_CONVERTER}
    {$DEFINE SG_USE_DYNAPDF}
  {$ENDIF}
  {$INCLUDE ABViewer.INC}
  {$INCLUDE SGCOMMON.INC}
  {$UNDEF SG_SHARED_VCL}
{$ENDIF}

{$IFDEF SG_INVENTORYX}
  {$DEFINE SG_ACTIVE_X}
  {$DEFINE SG_INVENTORY}
  {$DEFINE SG_MDI}
{$ENDIF}

{$IFDEF SG_INVENTORY}
  {$INCLUDE Inventory.INC}
  {$INCLUDE SGCOMMON.INC}
  {$UNDEF SG_SHARED_VCL}
{$ENDIF}

{$IFDEF SG_ABCAD}
  {$INCLUDE ABCAD.INC}
  {$INCLUDE SGCOMMON.INC}
  {$UNDEF SG_SHARED_VCL}
{$ENDIF}

{$IFDEF SG_EVACUATION}
  {$INCLUDE Evacuation.INC}
  {$INCLUDE SGCOMMON.INC}
  {$UNDEF SG_SHARED_VCL}
{$ENDIF}

{$IFDEF SG_CADVIEW_WLX}
  {$DEFINE SG_EMBEDDED_CONTROL}
  {$INCLUDE SGCOMMON_DLL.INC}
{$ENDIF}

{$IFDEF SG_CADEDITORX}
  {$DEFINE SG_ACTIVE_X}
  {$IFNDEF SG_INVENTORYX}
    {$INCLUDE SGCOMMON.INC}
    {$INCLUDE CADEDITORX.INC}
    {$UNDEF SG_SHARED_VCL}
  {$ENDIF}
{$ENDIF}

{$IFDEF SG_BIG_CLIENT}
  {$DEFINE SG_ACTIVE_X}
  {$INCLUDE SGCOMMON.INC}
  {$INCLUDE CADEDITORX.INC}
  {$UNDEF SG_SHARED_VCL}
{$ENDIF}

{$IFDEF SG_CADVIEWX_LITE}
  {$DEFINE SG_ACTIVE_X}
  {$INCLUDE CADVIEWX_LITE.INC}
  {$INCLUDE SGCOMMON.INC}
  {$UNDEF SG_SAT}
  {$UNDEF SG_STL}
  {$UNDEF SG_XML_INTERFACE}
{$ELSE}
  {$IFDEF SGCADVIEWX}
    {$DEFINE SG_ACTIVE_X}
    {$INCLUDE CADVIEWX.INC}
    {$INCLUDE SGCOMMON.INC}

    {$IFNDEF SG_INVENTORY} // for CadEditorX check directive "SGCADVIEWX"
      {$UNDEF SG_NO3DMODELS}
    {$ENDIF}

  {$ENDIF}
{$ENDIF}

{$IFDEF SG_ACTIVE_X}
  {$DEFINE SG_EMBEDDED_CONTROL}
{$ENDIF}

{$IFDEF SG_ADITIONAL_GRAPHICS}
  {$DEFINE SG_USE_PNG}
{$ENDIF}

{$IFDEF SG_CAD_DLL}
  {$INCLUDE SGCOMMON_DLL.inc}
  {$IFDEF SGFPC}
    {$UNDEF SG_FAST_CODE}
  {$ENDIF}
  {$IFDEF SGDEL_2010}
    {$DEFINE SG_LATE_BINDING}
  {$ENDIF}
{$ELSE}
  {$IFDEF SG_CADIMPORTER_DLL}
    {$INCLUDE CADIMPORTER.INC}
    {$INCLUDE SGCOMMON_DLL.inc}
  {$ENDIF}
  {$IFDEF SG_CADIMAGE_DLL}
    {$INCLUDE CADImageDLL.inc}
    {$INCLUDE SGCOMMON_DLL.inc}
  {$ENDIF}
  {$IFDEF SG_EXPORT_DLL}
    {$DEFINE SG_NO_PDF}
    {$DEFINE SG_NO3DMODELS}
    {$INCLUDE SGCOMMON_DLL.inc}
  {$ENDIF}
{$ENDIF}

{$IFDEF CS_PLUGINS}
  {$DEFINE SG_NO_PDF}
  {$DEFINE SG_NO3DMODELS}
  {$INCLUDE SGCOMMON_DLL.inc}
{$ENDIF}

{$IFDEF SG_VM_PLUGIN}
  {$DEFINE SG_NO_PDF}
  {$DEFINE SG_NO3DMODELS}
  {$INCLUDE SGCOMMON_DLL.INC}
{$ENDIF}

{$IFDEF SG_KERNEL_TEST}
  {$DEFINE SG_BTI_TEST}
  {$UNDEF SG_SHARED_VCL}
  {$INCLUDE sg_cad_formats.inc}
{$ENDIF}

{$IFDEF SG_SHAREWAREMANAGER}
  {$DEFINE SG_NO3DMODELS}
  {$DEFINE SG_WIDE_DB}
  {$DEFINE SG_NONEEDCONSTANTS}
  {$DEFINE SGMULLANG}
  {$DEFINE SGAPPPROTECT}
  {$UNDEF SG_BTI}
  {$UNDEF SG_USE_FREEIMAGE}
  {$UNDEF SG_ABVIEWER}
  {$UNDEF DEBUG_LNG}
  {$IFDEF SG_DATABASE}
    {$UNDEF SG_SHAREIT}
    {$UNDEF SG_ADDRUSDOC}
    {$UNDEF SG_USE_ADO}
    {$DEFINE SG_USE_UNI}
    //{$DEFINE SG_USE_ADO}
  {$ELSE}
    {$DEFINE SG_SHAREIT}
    {$UNDEF SG_USE_UNI}
    {$DEFINE SG_USE_ADO}
  {$ENDIF}
  {$DEFINE SG_NO_PDF}
  {$UNDEF SG_PDF}
  {$UNDEF SG_DXF}
  {$UNDEF SG_DWG}
  {$UNDEF SG_HPGL}
  {$UNDEF SG_SVG}
  {$UNDEF SG_CGM}
  {$UNDEF SG_DWF}
  {$UNDEF SG_STL}
  {$UNDEF SG_SAT}
  {$UNDEF SG_MCP_FORMAT}
  {$UNDEF SG_DXT}
  {$DEFINE SG_NO_ADD_SUPPORTING_FILE_FORMAT}
  {$DEFINE SG_NOT_USE_GLSCENE}
{$ENDIF}

{$IFDEF  SG_KERNEL_TEST}
  {$IFNDEF SG_NO3DMODELS}
    {$INCLUDE sg_cad_formats.inc}
  {$ENDIF}
  {$IFDEF SG_FM_WINDOWS}
    {$DEFINE SG_NOT_USE_GLSCENE}
    {$DEFINE SG_USE_MODELLER}
  {$ENDIF}
{$ENDIF}

{$IFDEF SG_CADSERVICE_CLIENT}
  {$IFDEF SG_USE_NEW_CONVERTER}
    {$DEFINE SG_USE_DYNAPDF}
  {$ENDIF}
  {$INCLUDE CADService.inc}
  {$INCLUDE SGCOMMON_DLL.inc}
{$ENDIF}

{$IFDEF SG_CAD_NAVIGATOR}
  {$DEFINE SG_NOT_USE_GLSCENE}
  {$DEFINE SG_USE_MODELLER}
  //{$DEFINE SG_USE_INDY}
{$ENDIF}

{$DEFINE SG_USE_EXPORT}//in vcl import it is necessary to comment

{$DEFINE SG_BREP_TOPOLOGY}

{$DEFINE SG_XREF_EXTENDED}

{$DEFINE SG_SNAP3D}

{.$DEFINE SG_BLOCK_PREVIEW}

//{$DEFINE SG_VERSION_OLD}//The directive for activate old codes

{$DEFINE LOOP_STL}
//{$DEFINE SG_VECTORIZATION}
//{$DEFINE USE_CLIP}

{$IFDEF SG_INPUT_RECT_COORDS_FORCE}
  {$DEFINE SG_INPUT_RECT_COORDS}
{$ENDIF}

{$IFNDEF SG_NO3DMODELS}
  {$DEFINE SG_Parasolid}
{$ENDIF}

{$IFDEF SG_USE_INDY}
{$IFDEF SGDEL_XE7}
{$UNDEF SG_INDY_HAS_ANTIFREEZE}
{$ELSE}
{$DEFINE SG_INDY_HAS_ANTIFREEZE}
{$ENDIF}
{$ENDIF}

{$IFDEF SGDEL_7}
  {$IF Defined(SGFPC) and Defined(SG_CPUX64) and Defined(SG_WINDOWS)}
    {$DEFINE SG_NO_EXTENDED}
  {$IFEND}
{$ENDIF}  

{$IFDEF SG_DYNAPDF}
  {$DEFINE SG_USE_DYNAPDF}
{$ENDIF}
{$IFDEF SG_FIREMONKEY}
  {$DEFINE SG_USE_DYNAPDF}
{$ENDIF}

{$IFDEF SG_NO_QUICKPDF}
  {$DEFINE SG_NO_PDF}
{$ENDIF}

//{$DEFINE SG_NO_USE_KERNEL3D}
//delete this define if you use Modeler3d sources
{$DEFINE SG_USE_NOSOURCE_3DMODELER}